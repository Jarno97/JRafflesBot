var prompt = require("prompt");
const fs = require("fs");
const Papa = require('papaparse');
const chalk = require('chalk');

var currentFile;
var taskCSV;
var taskFiles;

module.exports = async function getTaskFile(taskFiles) {
    console.log(`Choose A File to Run \n`)
    for (var t = 0; t < taskFiles.length; t++) {
        console.log(` (${t}) ${taskFiles[t]}`)
    }
    console.log('')
    var taskFile = await prompt.get('Task');
    var task = fs.readFileSync(`../tasks/${taskFiles[taskFile.Task]}`, 'utf-8');
    taskCSV = Papa.parse(task, { header: true }).data;
    taskCSV.name = taskFiles[taskFile.Task]
    console.clear();
    console.log(`Running ${chalk.blue(taskFiles[taskFile.Task])}`);
    return taskCSV
}

