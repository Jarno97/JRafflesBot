var random = require('random-name');

const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
const numbers = "0123456789"
var lettersArray = letters.split('');

module.exports = async function jig(csv, i) {
    var addressArray = csv[i].Address1.split('');
    var address2Array = csv[i].Address2.split('');
    var mailSplit = csv[i].Email.split('@');
    for (var l = 0; l < addressArray.length; l++) {
        if (addressArray[l] == 'X') {
            var pos2 = Math.round(Math.random() * (letters.length - 1));
            addressArray[l] = lettersArray[pos2];
        }
    };
    for (var l = 0; l < address2Array.length; l++) {
        if (address2Array[l] == 'X') {
            var pos2 = Math.round(Math.random() * (letters.length - 1));
            address2Array[l] = lettersArray[pos2];
        }
    };
    if (csv[i].FirstName == 'RANDOM') {
        csv[i].FirstName = random.first();
    }
    if (csv[i].LastName == 'RANDOM') {
        csv[i].LastName = random.last();
    }
    if (mailSplit[0] == 'RANDOM') {
        mailSplit[0] = `${random.first()}${random.last()}@`;
    } else {
        mailSplit[0] = `${mailSplit[0]}@`
    }
    csv[i].Email = mailSplit.join('');
    csv[i].Address1 = addressArray.join('');
    csv[i].Address2 = address2Array.join('');
    return
}